Прототип файрвола
=================

Данный проект является прототипом файрвола, написан на языке C.

## Функциональность

* Реализована комбинированная фильтрация по сетям, портам и протоколам передачи.
* Реализована валидация входных данных.
* Поддержка как статической, так и динамической базы правил из файла.
* Поддержка любых протоколов передачи данных, присутствующих в списке /etc/protocols.
* Реализован генератор случайных "пакетов".
* Реализована возможность перезагрузки базы правил из файла "на лету" с помощью отправки сигнала SIGHUP.

## Структура проекта

Проект имеет следующую структуру:
* data - содержит примеры входных (in) и выходных (out) данных, а также информацию о правилах (rules);
* include - содержит заголовочные файлы файрвола;
* src - содержит исходные файлы файрвола;
* tests - содержит исходные файлы функциональных тестов;
* CMakeLists.txt - файл сборки проекта на базе CMake;
* firewall.c - исходный файл файрвола;
* generator.c - исходный файл генератора "пакетов".

## Инструкция по сборке

```bash
mkdir build
cd build
cmake ..
cmake --build .
```

## Варианты запуска

### Запуск файрвола

В случае загрузки базы правил из файла утилита вызывается с одним аргументом - путем к файлу. В ином случае - без аргументов.

```bash
cd build
./firewall [путь к базе правил] < ./data/in
```

### Запуск файрвола с генератором "пакетов"

Генератор по умолчанию отправляет 32 сообщения. Это значение можно изменить через единственный аргумент при вызове утилиты.

```bash
cd build
./generator [количество] | ./firewall ./data/rules > output
```

### Запуск функциональных тестов

Конкретный тест можно запустить следующим образом:

```bash
cd build
./tests/[название теста]
```

Также есть возможность запустить все тесты сразу:

```bash
cd build/tests
./run_all .
```